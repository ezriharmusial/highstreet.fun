---
import { Image } from "astro:assets";

const { playerName } = Astro.props

let userRes = await fetch(`https://api.highstreet.fun/users/${playerName}`)
let userData = await userRes.json();

---
{userData &&

  <a data-tooltip-target="tooltip-default" class="landscape:w-[20vw] portrait:md:w-[33vw] portrait:w-full mb-8" href={"/players/" + playerName} alt={playerName + "'s Player profile"}>
    <figure class="flex landscape:flex-col portrait:flex-row-reverse justify-center items-center">
        <figcaption class="p-1 md:px-4 md:py-2 bg-black/60 text-white landscape:md:text-xl font-bold rounded-md mx-auto flex items-center"><div class={"mr-2 " + userData?.groups }></div> {playerName}</figcaption>
        <Image
        class="group-hover:scale-[1.03] landscape:w-[20vw] portrait:md:w-[33vw] portrait:w-[40vw] mx-[4vw] aspect-square transition duration-300 w-full"
        src={"https://mc-heads.net/head/" + playerName}
        alt={playerName}
        width={150}
        height={150}
        transition:name={"image" + playerName}
        />

      </figure>

  <div id={"tooltip-" + playerName} role="tooltip" class="absolute z-10 invisible inline-block px-3 py-2 text-sm font-medium text-white transition-opacity duration-300 bg-gray-900 rounded-lg shadow-sm opacity-0 tooltip dark:bg-gray-700">
    <dl>
      <dt class="text-sm font-bold leading-6 text-gray-900">Spelersgroep</dt> <dd class="mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0">{userData?.groups }</dd>
      <dt class="text-sm font-bold leading-6 text-gray-900">OP</dt> <dd class="mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0">{userData?.op }</dd>
      <dt class="text-sm font-bold leading-6 text-gray-900">Online</dt> <dd class="mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0">{userData?.online }</dd>
      <dt class="text-sm font-bold leading-6 text-gray-900">Laatst gespot</dt> <dd class="mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0">{userData?.last_seen }</dd>
    </dl>
    <div class="tooltip-arrow" data-popper-arrow></div>
  </div>

  </a>

}
<style>
.developer {
	content: "developer";
  height: 1rem;
  width: 6.25rem;
	display: block;
	background: white;
	background-image: url('/webpromo/developer.png');
	background-size: contain;
}
.default {
	content: "player";
  height: 1rem;
  width: 4rem;
	display: inline-block;
	background: orange;
	background-image: url('/webpromo/helper.png');
	background-size: contain;
}
.mod {
  height: 1rem;
  width: 2.25rem;
  content: ":mod:";
	display: inline-block;
	background: orange;
	background-image: url('/webpromo/mod.png');
	background-size: contain;
}
.owner {
	content: "game-master";
  height: 1rem;
  width: 7.75rem;
	display: inline-block;
	background: orange;
	background-image: url('/webpromo/game-master.png');
	background-size: contain;
}
</style>
